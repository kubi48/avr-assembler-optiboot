#!/bin/bash
export Prefix="m1281_HW32x_1"
MYAVR=m1281
FY9600="/dev/ttyUSB0"
APORT="/dev/ttyACM0"
#APORT="/dev/ttyUSB1"
# serial chips FT232RL FT232clone CH340G CP2102 CP2104 PL2303 Pololu UNO
export SERCHIP="ArduinoUNO"
stty -F ${FY9600} 115200
echo "WMW01" > ${FY9600}
sleep 1s
echo "WMO02.40" > ${FY9600}
sleep 1s
echo "WMA04.50" > ${FY9600}
sleep 1s
export FRQ
##################
export TSB=1
export BAUD_RATE=230400
#
FRQ=16000000
echo "WMF${FRQ}000000" > ${FY9600}
sleep 1s
#./do40 make ${MYAVR} AVR_FREQ=16000000 BAUD_RATE=${BAUD_RATE} TWO_STOP_BITS=${TSB} BIGPROGRAM=8332 SOFT_UART=-1 PORT=${APORT} ISP=1
#
FRQ=14000000
while [ $FRQ -le 18000000 ]
do
echo "WMF${FRQ}000000" > ${FY9600}
sleep 1s
./do40 make ${MYAVR} AVR_FREQ=16000000 BAUD_RATE=${BAUD_RATE} TWO_STOP_BITS=${TSB} BIGPROGRAM=8332 SOFT_UART=-1 PORT=${APORT} ISP=1
FRQ=`expr $FRQ + 100000`
done
#
export TSB=0
FRQ=14000000
#while [ $FRQ -le 18000000 ]
#do
#echo "WMF${FRQ}000000" > ${FY9600}
#sleep 1s
#./do40 make ${MYAVR} AVR_FREQ=16000000 BAUD_RATE=${BAUD_RATE} TWO_STOP_BITS=${TSB} BIGPROGRAM=8332 SOFT_UART=-1 PORT=${APORT} ISP=1
#FRQ=`expr $FRQ + 100000`
#done
#
#
echo "WMF16000000000000" > ${FY9600}
sleep 1s
#

